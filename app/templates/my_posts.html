{% extends 'base.html' %}
{% block title %}

{% endblock title %}
{% load custom_tags %}

{% block content %}
<h1 align="center">Мои статьи</h1>

<hr>

{% if posts %}
<table align="center" width="1200">

    {% for post in posts %}
    <tr>
        <td align="center"><img src="{{ post.picture.url }}" alt="Not Found" height="300px"></td>
        <td align="center">{{ post.title }}</td>
        <td align="center">{{ post.category }}</td>
        <td align="center">{{ post.time_in |date:'d M Y' }}</td>


<td><a href="{% url 'edit_post' post.pk %}">Изменить</a></td>
        <td><a href="{% url 'delete_post' post.pk  %}">Удалить</a></td>

    </tr>
    {% endfor %}

</table>
{% else %}
<h2>Сообщений нет!</h2>
{% endif %}

{% if page_obj.has_previous %}
{# Для каждой ссылки пагинации указываем обработку через новый тег #}
<a href="?{% url_replace page=1 %}">1</a>
{% if page_obj.previous_page_number != 1 %}
... <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
{% endif %}
{% endif %}

{{ page_obj.number }}

{% if page_obj.has_next %}
<a href="?{% url_replace page=page_obj.next_page_number %}">{{ page_obj.next_page_number }}</a>
{% if paginator.num_pages != page_obj.next_page_number %}
...
<a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
{% endif %}
{% endif %}

{% endblock content %}